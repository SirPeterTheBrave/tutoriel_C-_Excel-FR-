var toggleSwitch = document.getElementById('darkSwitch');
var currentTheme = null;

function initTheme(){
    
    if (currentTheme) {

        if (currentTheme === 'dark') {
            toggleSwitch.checked = false;
        }else if(currentTheme === 'light'){
            toggleSwitch.checked = true;
        }

    } else {
        sessionStorage.setItem('theme', 'dark');
    }

    document.documentElement.setAttribute('data-theme', currentTheme);
}

function switchTheme() {
    if (!toggleSwitch.checked) {
        document.documentElement.setAttribute('data-theme', 'dark');
        sessionStorage.setItem('theme', 'dark');
    }
    else {        
        document.documentElement.setAttribute('data-theme', 'light');
        sessionStorage.setItem('theme', 'light');
    }
}

if (typeof(Storage) === "undefined" || (window.location.protocol === "file:" &&(navigator.userAgent.match(/Edge/i)))){
        alert('Storage turned off, the Theme selection will not be saved');
        toggleSwitch.addEventListener('change', function(event){
            (event.target.checked) ? document.body.setAttribute('data-theme', 'light') : document.body.removeAttribute('data-theme');
          });
}else{

        currentTheme = sessionStorage.getItem('theme');

        window.addEventListener("load",function(event){initTheme();});
        toggleSwitch.addEventListener("change",function(event){switchTheme()});
}

